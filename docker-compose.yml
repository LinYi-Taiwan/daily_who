version: "3.7"

services:
    flask:
        build: ./flaskapp
        container_name: daily-who-flaskapp

        # restart: always
        environment:
            - APP_NAME=FlaskApp
            - OPENAI_KEY=${OPENAI_KEY}
            - OPENAI_MODEL=${OPENAI_MODEL}
            - VECTOR_GITHUB_GIST=${VECTOR_GITHUB_GIST}
        volumes:
            - ./flaskapp:/app
        expose:
            - 8080

    nginx:
        build: ./nginx
        container_name: daily-who-nginx
        environment:
            - SERVER_NAME=${SERVER_NAME}
        # restart: always
        ports:
            - "80:80"
            # - "443:443"

        depends_on:
            - flask
